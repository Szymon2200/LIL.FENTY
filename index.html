<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIL.FENTY</title>
    <style>
        :root {
            --black: #000;
            --white: #fff;
            --gray: #222;
            --accent: #ffffff;
            --font-main: 'Arial Black', sans-serif;
        }
        body {
            font-family: Arial, sans-serif;
            background: var(--black);
            color: var(--white);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        .login-page {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .login-container {
            background: var(--gray);
            padding: 40px;
            border-radius: 10px;
            text-align: center;
            width: 300px;
        }
        .logo {
            font-family: var(--font-main);
            font-size: 3.5rem;
            margin-bottom: 30px;
            color: var(--accent);
        }
        .logo span {
            color: var(--white);
        }
        .input-field {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: #111;
            border: none;
            color: white;
            font-size: 16px;
        }
        .btn {
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            background: var(--accent);
            border: none;
            color: black;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
        }
        .main-page, .admin-page {
            display: none;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .page-title {
            font-family: var(--font-main);
            font-size: 3rem;
            color: var(--accent);
        }
        .page-title span {
            color: var(--white);
        }
        .logout-btn {
            background: none;
            border: none;
            color: var(--accent);
            cursor: pointer;
            font-size: 16px;
        }
        .music-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        .music-card {
            background: var(--gray);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s;
            cursor: pointer;
        }
        .music-card:hover {
            transform: scale(1.03);
        }
        .album-art {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .music-info {
            padding: 15px;
        }
        .music-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .music-artist {
            color: #aaa;
            font-size: 14px;
        }
        .player-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--gray);
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .player-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-grow: 1;
        }
        .player-cover {
            width: 50px;
            height: 50px;
            border-radius: 5px;
        }
        .player-text {
            flex-grow: 1;
        }
        .player-title {
            font-weight: bold;
        }
        .player-artist {
            color: #aaa;
            font-size: 14px;
        }
        audio {
            flex-grow: 1;
            max-width: 500px;
            background: #111;
            border-radius: 5px;
        }
        .admin-form {
            background: var(--gray);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-label {
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <!-- Ekran logowania -->
    <div class="login-page" id="loginPage">
        <div class="login-container">
            <div class="logo">LIL.<span>FENTY</span></div>
            <form id="loginForm">
                <input type="text" id="username" class="input-field" placeholder="LOGIN" required>
                <button type="submit" class="btn">ZALOGUJ</button>
            </form>
        </div>
    </div>

    <!-- Panel użytkownika -->
    <div class="main-page" id="mainPage">
        <div class="header">
            <div class="page-title">LIL.<span>FENTY</span></div>
            <button class="logout-btn" id="logoutBtn">WYLOGUJ</button>
        </div>
        <div class="music-grid" id="musicGrid"></div>
    </div>

    <!-- Panel admina -->
    <div class="admin-page" id="adminPage">
        <div class="header">
            <div class="page-title">LIL.<span>FENTY</span> <span style="color: var(--accent)">(ADMIN)</span></div>
            <button class="logout-btn" id="adminLogoutBtn">WYLOGUJ</button>
        </div>
        <div class="admin-form">
            <h3>Dodaj nowy utwór</h3>
            <div class="form-group">
                <label class="form-label">Tytuł:</label>
                <input type="text" id="songTitle" class="input-field">
            </div>
            <div class="form-group">
                <label class="form-label">Artysta:</label>
                <input type="text" id="songArtist" class="input-field">
            </div>
            <div class="form-group">
                <label class="form-label">Link do okładki (URL):</label>
                <input type="text" id="songCover" class="input-field">
            </div>
            <div class="form-group">
                <label class="form-label">Link do MP3 (URL):</label>
                <input type="text" id="songAudio" class="input-field">
            </div>
            <button class="btn" id="addSongBtn">DODAJ UTWÓR</button>
        </div>
        <div class="music-grid" id="adminMusicGrid"></div>
    </div>

    <!-- Player -->
    <div class="player-bar" id="playerBar">
        <div class="player-info">
            <img id="nowPlayingCover" src="https://via.placeholder.com/50" class="player-cover">
            <div class="player-text">
                <div id="nowPlayingTitle" class="player-title">Nie odtwarzano</div>
                <div id="nowPlayingArtist" class="player-artist">-</div>
            </div>
        </div>
        <audio id="audioPlayer" controls></audio>
    </div>

    <script>
        // Dane aplikacji
        const users = {
            "DupaZupa": { isAdmin: true, password: "admin123" },
            "user1": { isAdmin: false, password: "pass1" },
            "user2": { isAdmin: false, password: "pass2" }
        };

        let musicLibrary = [
            {
                id: 1,
                title: "COUPE",
                artist: "LIL.FENTY",
                cover: "https://i.imgur.com/rSUrx2Q.jpeg",
                audio: "https://drive.google.com/uc?export=download&id=1TP_zEiHTmlMmahA14xikHp5lqGLVlT0w"
            }
        ];

        // Elementy DOM
        const loginPage = document.getElementById('loginPage');
        const mainPage = document.getElementById('mainPage');
        const adminPage = document.getElementById('adminPage');
        const loginForm = document.getElementById('loginForm');
        const usernameInput = document.getElementById('username');
        const logoutBtn = document.getElementById('logoutBtn');
        const adminLogoutBtn = document.getElementById('adminLogoutBtn');
        const musicGrid = document.getElementById('musicGrid');
        const adminMusicGrid = document.getElementById('adminMusicGrid');
        const addSongBtn = document.getElementById('addSongBtn');
        const audioPlayer = document.getElementById('audioPlayer');
        const nowPlayingTitle = document.getElementById('nowPlayingTitle');
        const nowPlayingArtist = document.getElementById('nowPlayingArtist');
        const nowPlayingCover = document.getElementById('nowPlayingCover');
        const playerBar = document.getElementById('playerBar');

        // Inicjalizacja
        renderMusicLibrary();
        playerBar.style.display = 'none';

        // Logowanie
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = usernameInput.value.trim();
            
            if (users[username]) {
                if (username === "DupaZupa") {
                    adminPage.style.display = 'block';
                    renderAdminMusicLibrary();
                } else {
                    mainPage.style.display = 'block';
                }
                loginPage.style.display = 'none';
                playerBar.style.display = 'flex';
            } else {
                alert("Nieprawidłowy login!");
            }
        });

        // Wylogowanie
        logoutBtn.addEventListener('click', logout);
        adminLogoutBtn.addEventListener('click', logout);

        function logout() {
            loginPage.style.display = 'flex';
            mainPage.style.display = 'none';
            adminPage.style.display = 'none';
            playerBar.style.display = 'none';
            usernameInput.value = '';
            audioPlayer.src = '';
            audioPlayer.pause();
        }

        // Renderowanie muzyki
        function renderMusicLibrary() {
            musicGrid.innerHTML = '';
            musicLibrary.forEach(song => {
                const card = document.createElement('div');
                card.className = 'music-card';
                card.innerHTML = `
                    <img src="${song.cover}" class="album-art">
                    <div class="music-info">
                        <div class="music-title">${song.title}</div>
                        <div class="music-artist">${song.artist}</div>
                    </div>
                `;
                card.addEventListener('click', () => playSong(song));
                musicGrid.appendChild(card);
            });
        }

        function renderAdminMusicLibrary() {
            adminMusicGrid.innerHTML = '';
            musicLibrary.forEach(song => {
                const card = document.createElement('div');
                card.className = 'music-card';
                card.innerHTML = `
                    <img src="${song.cover}" class="album-art">
                    <div class="music-info">
                        <div class="music-title">${song.title}</div>
                        <div class="music-artist">${song.artist}</div>
                    </div>
                `;
                card.addEventListener('click', () => playSong(song));
                adminMusicGrid.appendChild(card);
            });
        }

        // Odtwarzanie muzyki
        function playSong(song) {
            audioPlayer.src = song.audio;
            audioPlayer.play()
                .then(() => {
                    nowPlayingTitle.textContent = song.title;
                    nowPlayingArtist.textContent = song.artist;
                    nowPlayingCover.src = song.cover;
                })
                .catch(error => {
                    console.error("Błąd odtwarzania:", error);
                    alert("Nie można odtworzyć utworu. Sprawdź link do pliku audio!");
                });
        }

        // Dodawanie nowego utworu (admin)
        addSongBtn.addEventListener('click', function() {
            const title = document.getElementById('songTitle').value.trim();
            const artist = document.getElementById('songArtist').value.trim();
            const cover = document.getElementById('songCover').value.trim();
            const audio = document.getElementById('songAudio').value.trim();
            
            if (title && artist && cover && audio) {
                // Sprawdź czy link do MP3 jest poprawny
                if (!audio.startsWith('http')) {
                    alert("Link do MP3 musi zaczynać się od http:// lub https://");
                    return;
                }

                const newSong = {
                    id: Date.now(),
                    title,
                    artist,
                    cover,
                    audio
                };
                
                musicLibrary.push(newSong);
                renderMusicLibrary();
                renderAdminMusicLibrary();
                
                // Wyczyść formularz
                document.getElementById('songTitle').value = '';
                document.getElementById('songArtist').value = '';
                document.getElementById('songCover').value = '';
                document.getElementById('songAudio').value = '';
                
                alert("Utwór dodany pomyślnie!");
            } else {
                alert("Wypełnij wszystkie pola!");
            }
        });
    </script>
</body>
</html>
